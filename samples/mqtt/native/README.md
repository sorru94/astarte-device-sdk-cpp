<!--
Copyright 2025 SECO Mind Srl

SPDX-License-Identifier: Apache-2.0
-->

# MQTT example for the Astarte device

This sample shows the device sdk functionalities for the Astarte device library for C++, such as
the registration of a new device, its connection to Astarte through an MQTT connection, sending and receiving data from/to Astarte, etc.

## Configure the sample
It is possible to configure the example by creating and modifying a `config.toml` file.
During the sdk development several paramenters will be added to this file to extend the
example functionalities.

An example of `config.toml` file is the following:
```
astarte_base_url = ""
realm = ""
device_id = ""
pairing_token = ""

[features]
DEVICE_REGISTRATION = true

```

The sample is configured to perform a device registration to an Astarte instance.

The parameters you need to provide are:
- `astarte_base_url`, the URL of the Astarte instance
- `realm`, the name of the Astarte realm where the device will be registered
- `device_id`, a 128bit URL encoded base64 string uniquelly identifying a device
- `pairing_token`, a token necessary to authenticate though Astarte

## Building and running

To build this sample run the `build_sample.sh` present in the root of this project with your
preferred options. Run `build_sample.sh --help` for more info.

Running the sample should be done by excecuting the binary directly.
The binary generated by `build_sample.sh` can be found at `samples/mqtt/native/build/app`.
